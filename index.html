<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YKS YARDIMCIM - KOMUTAN MERÄ°Ã‡</title>
    <style>
        /* --- CORE THEME --- */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap');

        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff0055;
            --neon-gold: #ffd700;
            --neon-green: #0aff0a;
            --bg-dark: #050510;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0;
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden; /* Yatay taÅŸmayÄ± engelle */
            overflow-y: auto;   /* Dikey kaydÄ±rmaya izin ver */
        }

        /* --- SAVAÅ ALANI (EN ARKA PLAN) --- */
        #warCanvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: radial-gradient(circle at bottom, #100b20 0%, #000000 100%);
        }

        /* --- ANA DÃœZEN (LAYOUT) --- */
        #app {
            display: flex;
            min-height: 100vh;
            /* Mobilde alt alta, PC'de yan yana olmasÄ± iÃ§in flex-wrap */
            flex-wrap: wrap; 
        }

        /* --- SOL MENÃœ (SIDEBAR) --- */
        .sidebar {
            width: 320px;
            /* YÃ¼kseklik ekran kadar olsun ama kayabilsin */
            height: 100vh; 
            position: sticky; top: 0; /* PC'de sabit kalsÄ±n */
            background: rgba(5, 5, 12, 0.9);
            border-right: 2px solid var(--neon-blue);
            backdrop-filter: blur(5px);
            display: flex; flex-direction: column;
            padding: 20px;
            overflow-y: auto; /* MenÃ¼ iÃ§eriÄŸi taÅŸarsa kaydÄ±r */
            z-index: 50;
        }

        .logo-box {
            width: 120px; height: 120px; margin: 0 auto 15px; flex-shrink: 0;
            border-radius: 50%; border: 3px solid var(--neon-gold);
            background-color: #000;
            background-image: url('logo.jpeg'); 
            background-size: cover; background-position: center;
            box-shadow: 0 0 20px var(--neon-gold);
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { box-shadow: 0 0 15px var(--neon-gold); } 50% { box-shadow: 0 0 35px var(--neon-gold); } 100% { box-shadow: 0 0 15px var(--neon-gold); } }

        h1 {
            font-family: 'Orbitron'; font-size: 24px; text-align: center; margin: 5px 0;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        h2 { text-align: center; font-size: 14px; color: #aaa; letter-spacing: 3px; margin-bottom: 20px; font-weight: bold; }

        /* BUTONLAR */
        .nav-buttons { display: flex; flex-direction: column; gap: 10px; }
        .menu-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: #ddd; padding: 14px;
            text-align: left; font-family: 'Orbitron'; cursor: pointer;
            transition: 0.3s; border-radius: 8px; font-size: 15px;
            display: flex; align-items: center;
        }
        .menu-btn:hover { background: rgba(0, 243, 255, 0.15); border-color: var(--neon-blue); transform: translateX(5px); }
        .menu-btn.active {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.2), transparent);
            border-left: 5px solid var(--neon-gold); color: var(--neon-gold);
        }

        /* --- Ä°Ã‡ERÄ°K ALANI --- */
        .main-content {
            flex: 1; /* Kalan alanÄ± kapla */
            padding: 30px;
            position: relative;
            /* Arkadaki savaÅŸÄ± gÃ¶rmek iÃ§in ÅŸeffaflÄ±k ayarÄ± */
            background: transparent; 
        }

        .home-title { 
            font-size: 42px; margin-bottom: 10px; 
            text-shadow: 0 0 10px black; 
        }
        
        /* Ä°STATÄ°STÄ°K KARTLARI */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .stat-card {
            background: rgba(20, 20, 35, 0.85); /* ArkasÄ± biraz gÃ¶rÃ¼nsÃ¼n ama yazÄ± okunsun */
            backdrop-filter: blur(10px);
            padding: 25px; border-radius: 15px; border: 1px solid #444; text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        .stat-val { font-size: 50px; font-weight: 900; margin: 10px 0; }

        /* KONU KARTLARI */
        .grid-topics { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .card-topic { 
            background: rgba(10, 10, 20, 0.9);
            border: 1px solid #444; border-radius: 12px; padding: 20px; cursor: pointer; 
            transition: 0.3s; position: relative;
        }
        .card-topic:hover { transform: translateY(-5px); border-color: var(--neon-blue); box-shadow: 0 0 20px rgba(0, 243, 255, 0.2); }
        .topic-status { position: absolute; top: 15px; right: 15px; font-size: 18px; }

        /* OKUMA EKRANI (READER) */
        .reader-container {
            background: rgba(12, 12, 25, 0.98); 
            border: 1px solid var(--neon-blue);
            padding: 40px; border-radius: 15px; 
            box-shadow: 0 0 50px rgba(0,0,0,0.8); 
            display: none; animation: slideUp 0.4s;
            margin-bottom: 50px;
        }
        .reader-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--neon-blue); padding-bottom: 15px; margin-bottom: 30px; }
        .reader-title { font-family: 'Orbitron'; font-size: 32px; color: var(--neon-blue); }
        
        .content-body { font-size: 18px; line-height: 1.7; color: #ddd; }
        .content-body h3 { 
            color: var(--neon-gold); font-size: 24px; margin-top: 40px; 
            border-left: 4px solid var(--neon-gold); padding-left: 15px; 
            background: rgba(255, 215, 0, 0.1); padding: 10px;
        }
        .box-formula { 
            border: 2px solid var(--neon-green); background: rgba(10, 255, 10, 0.05); 
            padding: 20px; margin: 30px 0; text-align: center; 
            font-family: 'Orbitron'; font-size: 24px; color: var(--neon-green); border-radius: 10px;
        }

        /* QUIZ POPUP */
        .quiz-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; display: none; justify-content: center; align-items: center; padding: 20px; }
        .quiz-modal { 
            background: #151525; padding: 30px; border-radius: 20px; border: 2px solid var(--neon-pink); 
            width: 600px; max-width: 100%; text-align: center; box-shadow: 0 0 50px rgba(255, 0, 85, 0.3);
        }
        .btn-opt { 
            width: 100%; padding: 15px; margin-top: 10px; background: #222; border: 1px solid #444; 
            color: white; font-size: 16px; cursor: pointer; transition: 0.2s; border-radius: 8px; font-weight: bold;
        }
        
        .btn-glow { 
            padding: 12px 30px; background: var(--neon-blue); color: #000; border: none; font-weight: 900; 
            cursor: pointer; border-radius: 6px; font-size: 16px; font-family: 'Orbitron'; 
        }

        /* --- ğŸ“± MOBILE OPTIMIZATION (HAYAT KURTARAN KISIM) --- */
        @media (max-width: 900px) {
            #app { flex-direction: column; }
            
            /* MenÃ¼yÃ¼ Ã¼stte sabitleme yerine akÄ±ÅŸa bÄ±rakÄ±yoruz ki tuÅŸlar kaybolmasÄ±n */
            .sidebar {
                width: 100%;
                height: auto; /* Sabit yÃ¼kseklik Ä°PTAL */
                min-height: auto;
                position: relative; /* Sabitleme Ä°PTAL */
                border-right: none;
                border-bottom: 2px solid var(--neon-blue);
                padding: 20px;
            }
            
            .logo-box { width: 90px; height: 90px; border-width: 3px; margin-bottom: 10px; }
            h1 { font-size: 22px; }
            
            /* Ä°Ã§erik alanÄ± */
            .main-content { padding: 20px; }
            .home-title { font-size: 32px; text-align: center; }
            
            .stats-grid { grid-template-columns: 1fr; } /* Mobilde istatistikler alt alta */
            .grid-topics { grid-template-columns: 1fr; } /* Kartlar alt alta */
            
            /* Reader */
            .reader-container { padding: 20px; }
            .reader-title { font-size: 22px; }
            .content-body { font-size: 16px; }
            .box-formula { font-size: 18px; word-break: break-all; }
            
            /* Diyagramlar taÅŸmasÄ±n */
            svg { max-width: 100%; height: auto; }
        }

        @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

<canvas id="warCanvas"></canvas>

<div id="app">
    <div class="sidebar">
        <div class="logo-box"></div>
        <h1>KOMUTAN MERÄ°Ã‡</h1>
        <h2>GALAKTÄ°K ÃœS</h2>
        
        <div style="margin: 10px 0; background: rgba(0,0,0,0.6); padding: 10px; border-radius: 8px; border: 1px solid #444;">
            <div style="display:flex; justify-content:space-between; color: var(--neon-gold); font-weight:bold; font-size: 13px; margin-bottom:5px;">
                <span id="levelLabel">LVL 1</span>
                <span id="xpText">0 XP</span>
            </div>
            <div style="height: 8px; background: #222; border-radius: 4px; overflow: hidden;">
                <div id="xpBar" style="height: 100%; background: var(--neon-gold); width: 0%; transition: 0.5s;"></div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="menu-btn active" onclick="nav('home')">ğŸš€ ANA EKRAN</button>
            <button class="menu-btn" onclick="nav('topics')">ğŸ“š KÃœTÃœPHANE</button>
            <button class="menu-btn" onclick="startRandomQuiz()">âš”ï¸ SAVAÅ (TEST)</button>
            <button class="menu-btn" style="color:#ff5555" onclick="resetSys()">âš ï¸ Ä°MHA ET</button>
        </div>
    </div>

    <div class="main-content">
        <div id="view-home">
            <h1 class="home-title">SAVAÅ BAÅLADI <span style="color:var(--neon-gold)">KOMUTAN!</span></h1>
            <p style="color: #ccc; font-size: 18px; margin-bottom: 30px; background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px; border-left: 4px solid var(--neon-blue);">
                AÅŸaÄŸÄ±daki "Ana Gemimiz" (Mavi) otomatik savunma yapÄ±yor. DÃ¼ÅŸmanlar (KÄ±rmÄ±zÄ±) saldÄ±rÄ±yor. Fizik bilginle kalkanlarÄ± gÃ¼Ã§lendir!
            </p>
            
            <div class="stats-grid">
                <div class="stat-card" style="border-color: var(--neon-blue);">
                    <h3 style="margin:0; color:var(--neon-blue); font-size: 16px;">GÃ–REVLER</h3>
                    <div id="statTopics" class="stat-val" style="color: var(--neon-blue);">0</div>
                </div>
                <div class="stat-card" style="border-color: var(--neon-gold);">
                    <h3 style="margin:0; color:var(--neon-gold); font-size: 16px;">GÃœÃ‡ (XP)</h3>
                    <div id="statXP" class="stat-val" style="color: var(--neon-gold);">0</div>
                </div>
            </div>
        </div>

        <div id="view-topics" class="hidden">
            <h1 style="text-align: center; margin-bottom: 30px; color: var(--neon-pink); font-family: 'Orbitron';">FÄ°ZÄ°K ARÅÄ°VÄ°</h1>
            <div class="grid-topics" id="topicGrid"></div>
        </div>

        <div id="view-reader" class="reader-container">
            <div class="reader-header">
                <div class="reader-title" id="readTitle">BaÅŸlÄ±k</div>
                <button class="btn-glow" style="padding: 8px 15px; font-size: 12px; background: #333; color: white; border:1px solid #555;" onclick="nav('topics')">KAPAT</button>
            </div>
            <div class="content-body" id="readBody"></div>
            <div style="margin-top: 40px; text-align: center; border-top: 1px solid #333; padding-top: 20px;">
                <button class="btn-glow" onclick="finishTopic()">âœ… GÃ–REVÄ° TAMAMLA</button>
            </div>
        </div>
    </div>
</div>

<div id="quizModal" class="quiz-overlay">
    <div class="quiz-modal">
        <h2 style="color: var(--neon-gold);">DÃœÅMAN GEMÄ°SÄ° TESPÄ°T EDÄ°LDÄ°!</h2>
        <div id="quizQ" style="font-size: 20px; margin: 20px 0; color:white;">Soru...</div>
        <div id="quizOpts"></div>
        <div id="quizRes" style="margin-top: 20px; font-weight: bold; min-height: 25px;"></div>
        <button onclick="closeQuiz()" style="margin-top: 20px; background:transparent; border:1px solid #555; color:#aaa; padding:10px 30px; cursor:pointer; border-radius:5px;">Ã‡IKIÅ</button>
    </div>
</div>

<script>
/* ----------------------------------------------------------------
   BÃ–LÃœM 1: GELÄ°ÅMÄ°Å SAVAÅ MOTORU (CANVAS)
   ---------------------------------------------------------------- */
const canvas = document.getElementById('warCanvas');
const ctx = canvas.getContext('2d');
let w, h;

// Oyun Objeleri
let player = { x: 0, y: 0, w: 40, h: 30, dir: 1 };
let enemies = [];
let bullets = [];
let particles = [];
let stars = [];

function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
    player.y = h - 60;
    player.x = w / 2;
}
window.addEventListener('resize', resize);
resize();

// Star Class
class Star {
    constructor() { this.reset(); }
    reset() { this.x = Math.random() * w; this.y = Math.random() * h; this.size = Math.random() * 2; this.speed = Math.random() * 0.8 + 0.1; }
    update() { this.y += this.speed; if(this.y > h) this.y = 0; }
    draw() { ctx.fillStyle = `rgba(255,255,255,${Math.random()})`; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill(); }
}

// Enemy Class
class Enemy {
    constructor() { this.reset(); this.y = Math.random() * -500; }
    reset() {
        this.x = Math.random() * (w - 30); this.y = -50;
        this.speed = Math.random() * 2 + 1; this.w = 30; this.h = 30;
    }
    update() { this.y += this.speed; if(this.y > h) this.reset(); }
    draw() {
        ctx.fillStyle = '#ff0055';
        ctx.shadowBlur = 10; ctx.shadowColor = '#ff0055';
        // Basit Gemi Ã‡izimi (AÅŸaÄŸÄ± Bakan ÃœÃ§gen)
        ctx.beginPath(); ctx.moveTo(this.x, this.y); ctx.lineTo(this.x+this.w, this.y); ctx.lineTo(this.x+this.w/2, this.y+this.h); ctx.fill();
        ctx.shadowBlur = 0;
    }
}

// Bullet Class
class Bullet {
    constructor(x, y, isEnemy) {
        this.x = x; this.y = y; this.isEnemy = isEnemy;
        this.speed = isEnemy ? 5 : 8; this.active = true;
    }
    update() {
        this.y += this.isEnemy ? this.speed : -this.speed;
        if(this.y < 0 || this.y > h) this.active = false;
    }
    draw() {
        ctx.fillStyle = this.isEnemy ? 'red' : '#00f3ff';
        ctx.fillRect(this.x, this.y, 4, 10);
    }
}

// Particle Class (Explosion)
class Particle {
    constructor(x, y, color) {
        this.x = x; this.y = y; this.color = color;
        this.vx = (Math.random()-0.5)*8; this.vy = (Math.random()-0.5)*8;
        this.life = 1.0;
    }
    update() { this.x += this.vx; this.y += this.vy; this.life -= 0.04; }
    draw() {
        ctx.globalAlpha = this.life; ctx.fillStyle = this.color;
        ctx.beginPath(); ctx.arc(this.x, this.y, 4, 0, Math.PI*2); ctx.fill();
        ctx.globalAlpha = 1.0;
    }
}

// Setup
for(let i=0; i<100; i++) stars.push(new Star());
for(let i=0; i<6; i++) enemies.push(new Enemy());

// --- GAME LOOP ---
function loop() {
    ctx.clearRect(0,0,w,h);

    // Stars
    stars.forEach(s => { s.update(); s.draw(); });

    // Player (Auto Move)
    player.x += player.dir * 2;
    if(player.x > w - 50 || player.x < 10) player.dir *= -1;
    
    // Player Draw
    ctx.fillStyle = '#00f3ff'; ctx.shadowBlur = 15; ctx.shadowColor = '#00f3ff';
    ctx.beginPath(); ctx.moveTo(player.x+20, player.y); ctx.lineTo(player.x, player.y+30); ctx.lineTo(player.x+40, player.y+30); ctx.fill();
    ctx.shadowBlur = 0;

    // Player Shoot (Auto)
    if(Math.random() < 0.05) bullets.push(new Bullet(player.x+18, player.y, false));

    // Enemies
    enemies.forEach(e => {
        e.update(); e.draw();
        // Collision with Player Bullet
        bullets.forEach(b => {
            if(!b.isEnemy && b.active && b.x > e.x && b.x < e.x+e.w && b.y > e.y && b.y < e.y+e.h) {
                // Explosion
                for(let k=0; k<8; k++) particles.push(new Particle(e.x+15, e.y+15, '#ffaa00'));
                e.reset(); b.active = false;
            }
        });
    });

    // Bullets
    bullets = bullets.filter(b => b.active);
    bullets.forEach(b => { b.update(); b.draw(); });

    // Particles
    particles = particles.filter(p => p.life > 0);
    particles.forEach(p => { p.update(); p.draw(); });

    requestAnimationFrame(loop);
}
loop();

/* ----------------------------------------------------------------
   BÃ–LÃœM 2: Ä°Ã‡ERÄ°K VERÄ°TABANI (Dolu Ä°Ã§erik)
   ---------------------------------------------------------------- */
const DB = [
    {
        id: "fizik_giris",
        title: "1. Fizik Bilimine GiriÅŸ",
        desc: "Fizik nedir? Alt dallar, bÃ¼yÃ¼klÃ¼kler.",
        content: `
            <h3>1. Fizik Nedir?</h3>
            <p>Madde ve enerji arasÄ±ndaki etkileÅŸimi inceleyen bilim dalÄ±dÄ±r. GÃ¶zlem ve deneye dayanÄ±r.</p>
            <div class="box-formula">Fizik = GÃ¶zlem + Deney + Matematik</div>
            <h3>2. Alt Dallar (KAMYONET)</h3>
            <ul><li>K: KatÄ±hal</li><li>A: Atom</li><li>M: Mekanik</li><li>Y: YÃ¼ksek Enerji</li><li>O: Optik</li><li>N: NÃ¼kleer</li><li>E: Elektromanyetizma</li><li>T: Termodinamik</li></ul>
            <h3>3. BÃ¼yÃ¼klÃ¼kler (KISA MUZ)</h3>
            <p>KÃ¼tle, IÅŸÄ±k Åiddeti, SÄ±caklÄ±k, AkÄ±m, Madde, Uzunluk, Zaman.</p>
        `,
        questions: [{ q: "Hangisi temel bÃ¼yÃ¼klÃ¼ktÃ¼r?", opts: ["HÄ±z", "Kuvvet", "Zaman", "Enerji"], a: 2 }]
    },
    {
        id: "madde",
        title: "2. Madde ve Ã–zellikleri",
        desc: "Ã–zkÃ¼tle, DayanÄ±klÄ±lÄ±k.",
        content: `
            <h3>1. Ã–zkÃ¼tle</h3>
            <div class="box-formula">d = m / V</div>
            <p>AyÄ±rt edici Ã¶zelliktir.</p>
            <h3>2. DayanÄ±klÄ±lÄ±k</h3>
            <p>Kesit AlanÄ± / Hacim ile orantÄ±lÄ±dÄ±r.</p>
        `,
        questions: [{ q: "d=m/V formÃ¼lÃ¼ neyi verir?", opts: ["HÄ±z", "Ã–zkÃ¼tle", "BasÄ±nÃ§"], a: 1 }]
    },
    {
        id: "hareket",
        title: "3. Hareket ve Kuvvet",
        desc: "Newton YasalarÄ±, HÄ±z.",
        content: `
            <h3>1. Newton YasalarÄ±</h3>
            <ul><li>Eylemsizlik</li><li>F=m.a</li><li>Etki-Tepki</li></ul>
            <div class="box-formula">F_net = m . a</div>
        `,
        questions: [{ q: "F=m.a yasasÄ± kime aittir?", opts: ["Einstein", "Newton", "Tesla"], a: 1 }]
    }
];

/* ----------------------------------------------------------------
   BÃ–LÃœM 3: APP MANTIÄI
   ---------------------------------------------------------------- */
let user = { xp: 0, level: 1, finished: [], totalXP: 0 };
window.onload = function() {
    loadSys(); renderTopics(); resize();
    const img = new Image(); img.src = 'logo.jpeg';
    img.onload = () => { document.querySelector('.logo-box').style.backgroundImage = "url('logo.jpeg')"; };
};

function nav(view) {
    document.getElementById('view-home').classList.add('hidden');
    document.getElementById('view-topics').classList.add('hidden');
    document.getElementById('view-reader').style.display = 'none';
    document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));

    if(view === 'home') {
        document.getElementById('view-home').classList.remove('hidden');
        document.querySelectorAll('.menu-btn')[0].classList.add('active');
    } else if (view === 'topics') {
        document.getElementById('view-topics').classList.remove('hidden');
        document.querySelectorAll('.menu-btn')[1].classList.add('active');
    }
    // Mobilde Ã¼st tarafa kaydÄ±r
    if(window.innerWidth < 900) window.scrollTo({top:0, behavior:'smooth'});
}

function renderTopics() {
    const grid = document.getElementById('topicGrid'); grid.innerHTML = '';
    DB.forEach(t => {
        const isDone = user.finished.includes(t.id);
        const card = document.createElement('div'); card.className = 'card-topic';
        card.innerHTML = `<div class="topic-status">${isDone?'ğŸ†':''}</div><h3>${t.title}</h3><p style="color:#aaa; font-size:14px;">${t.desc}</p>`;
        card.onclick = () => openReader(t.id); grid.appendChild(card);
    });
}
let activeTopic = null;
function openReader(id) {
    activeTopic = id; const t = DB.find(x => x.id === id); nav('none');
    const r = document.getElementById('view-reader'); r.style.display = 'block';
    document.getElementById('readTitle').innerText = t.title; document.getElementById('readBody').innerHTML = t.content;
    if(window.innerWidth < 900) window.scrollTo({top:0, behavior:'smooth'});
}
function finishTopic() {
    if(activeTopic && !user.finished.includes(activeTopic)) { user.finished.push(activeTopic); addXP(100); alert("GÃ–REV TAMAMLANDI! +100 XP"); saveSys(); nav('topics'); renderTopics(); }
    else { alert("Bu gÃ¶rev zaten yapÄ±ldÄ±."); nav('topics'); }
}
function startRandomQuiz() {
    const t = DB[Math.floor(Math.random() * DB.length)]; const q = t.questions[Math.floor(Math.random() * t.questions.length)];
    const m = document.getElementById('quizModal'); m.style.display = 'flex';
    document.getElementById('quizQ').innerText = q.q; document.getElementById('quizRes').innerText = "";
    const opts = document.getElementById('quizOpts'); opts.innerHTML = '';
    q.opts.forEach((opt, idx) => {
        const btn = document.createElement('button'); btn.className = 'btn-opt'; btn.innerText = opt;
        btn.onclick = () => {
            if(idx === q.a) { btn.style.background = 'var(--neon-green)'; btn.style.color='black'; document.getElementById('quizRes').innerText = "DOÄRU! (+20 XP)"; addXP(20); }
            else { btn.style.background = 'red'; document.getElementById('quizRes').innerText = "YANLIÅ!"; }
        }; opts.appendChild(btn);
    });
}
function closeQuiz() { document.getElementById('quizModal').style.display = 'none'; }
function loadSys() { const d = localStorage.getItem('yks_war_v1'); if(d) user = JSON.parse(d); updateHUD(); }
function saveSys() { localStorage.setItem('yks_war_v1', JSON.stringify(user)); updateHUD(); }
function resetSys() { if(confirm("SIFIRLAMAK Ä°STÄ°YOR MUSUN?")) { localStorage.removeItem('yks_war_v1'); location.reload(); } }
function addXP(amount) { user.xp += amount; user.totalXP += amount; const req = user.level*200; if(user.xp>=req){user.xp-=req; user.level++; alert("SEVÄ°YE ATLADIN!");} saveSys(); }
function updateHUD() {
    const req = user.level*200; const pct = (user.xp/req)*100;
    document.getElementById('xpText').innerText = `${user.xp}/${req}`; document.getElementById('levelLabel').innerText = `LVL ${user.level}`;
    document.getElementById('xpBar').style.width = `${pct}%`; document.getElementById('statTopics').innerText = user.finished.length; document.getElementById('statXP').innerText = user.totalXP;
}
</script>
</body>
</html>